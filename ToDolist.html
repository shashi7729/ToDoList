<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Awesome To-Do List</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #a7bfe8, #6190e8);
            background-size: 400% 400%;
            animation: gradientAnimation 15s ease infinite;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            padding: 2rem 1rem;
            box-sizing: border-box;
            overflow-x: hidden;
        }

        @keyframes gradientAnimation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .completed-task {
            text-decoration: line-through;
            color: #9ca3af;
            opacity: 0.7;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeOut {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(-10px); }
        }

        .task-enter {
            animation: fadeIn 0.3s ease-out forwards;
        }

        .task-exit {
            animation: fadeOut 0.3s ease-in forwards;
        }

        .filter-btn:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(96, 165, 250, 0.5);
        }
    </style>
</head>
<body class="antialiased">
    <div class="bg-white p-6 md:p-8 rounded-xl shadow-2xl w-full max-w-md border border-gray-100 transform transition-all duration-300 hover:shadow-3xl">
        <h1 class="text-4xl font-extrabold text-center text-gray-800 mb-8 tracking-tight">
            My To-Do List
        </h1>

        <div class="flex flex-col sm:flex-row gap-3 mb-6">
            <input
                type="text"
                id="taskInput"
                placeholder="Add a new task..."
                class="flex-grow p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-700 placeholder-gray-400 shadow-sm transition duration-200 ease-in-out"
                aria-label="New task input"
            >
            <button
                id="addTaskBtn"
                class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75"
            >
                Add Task
            </button>
        </div>

        <div class="flex justify-center gap-3 mb-6 flex-wrap">
            <button
                id="filterAllBtn"
                class="filter-btn bg-gray-200 hover:bg-gray-300 text-gray-700 font-medium py-2 px-4 rounded-lg transition duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-opacity-75"
                data-filter="all"
            >
                All
            </button>
            <button
                id="filterActiveBtn"
                class="filter-btn bg-gray-200 hover:bg-gray-300 text-gray-700 font-medium py-2 px-4 rounded-lg transition duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-opacity-75"
                data-filter="active"
            >
                Active
            </button>
            <button
                id="filterCompletedBtn"
                class="filter-btn bg-gray-200 hover:bg-gray-300 text-gray-700 font-medium py-2 px-4 rounded-lg transition duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-opacity-75"
                data-filter="completed"
            >
                Completed
            </button>
        </div>

        <ul id="taskList" class="space-y-3 mb-6">
            </ul>

        <div class="text-center">
            <button
                id="clearCompletedBtn"
                class="bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-5 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-75"
            >
                Clear Completed
            </button>
        </div>
    </div>

    <script>
        const taskInput = document.getElementById('taskInput');
        const addTaskBtn = document.getElementById('addTaskBtn');
        const taskList = document.getElementById('taskList');
        const filterButtons = document.querySelectorAll('.filter-btn');
        const clearCompletedBtn = document.getElementById('clearCompletedBtn');

        let tasks = JSON.parse(localStorage.getItem('tasks')) || [];
        let currentFilter = 'all';

        function saveTasks() {
            localStorage.setItem('tasks', JSON.stringify(tasks));
        }

        function renderTasks() {
            taskList.innerHTML = '';

            const filteredTasks = tasks.filter(task => {
                if (currentFilter === 'all') {
                    return true;
                } else if (currentFilter === 'active') {
                    return !task.completed;
                } else if (currentFilter === 'completed') {
                    return task.completed;
                }
            });

            if (filteredTasks.length === 0 && tasks.length === 0) {
                const noTasksMessage = document.createElement('li');
                noTasksMessage.className = 'text-center text-gray-500 py-4';
                noTasksMessage.textContent = 'No tasks yet! Add one above.';
                taskList.appendChild(noTasksMessage);
                return;
            } else if (filteredTasks.length === 0 && tasks.length > 0) {
                const noFilteredTasksMessage = document.createElement('li');
                noFilteredTasksMessage.className = 'text-center text-gray-500 py-4';
                noFilteredTasksMessage.textContent = `No ${currentFilter} tasks.`;
                taskList.appendChild(noFilteredTasksMessage);
                return;
            }

            filteredTasks.forEach(task => {
                const listItem = document.createElement('li');
                listItem.className = `flex items-center justify-between bg-gray-50 p-4 rounded-lg shadow-sm border border-gray-200 transition duration-150 ease-in-out task-enter ${task.completed ? 'completed-task' : ''}`;
                listItem.dataset.id = task.id;

                const taskText = document.createElement('span');
                taskText.textContent = task.text;
                taskText.className = `text-lg ${task.completed ? 'text-gray-500' : 'text-gray-800'} break-words flex-grow mr-4`;

                const actionsContainer = document.createElement('div');
                actionsContainer.className = 'flex gap-2 flex-shrink-0';

                const completeBtn = document.createElement('button');
                completeBtn.className = `p-2 rounded-full transition duration-200 ease-in-out ${task.completed ? 'bg-green-500 hover:bg-green-600' : 'bg-gray-300 hover:bg-gray-400'} text-white focus:outline-none focus:ring-2 focus:ring-offset-2 ${task.completed ? 'focus:ring-green-500' : 'focus:ring-gray-400'}`;
                completeBtn.innerHTML = `
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                `;
                completeBtn.title = task.completed ? 'Mark as Incomplete' : 'Mark as Complete';
                completeBtn.addEventListener('click', () => toggleComplete(task.id));

                const deleteBtn = document.createElement('button');
                deleteBtn.className = 'p-2 rounded-full bg-red-400 hover:bg-red-500 text-white transition duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-red-400 focus:ring-offset-2';
                deleteBtn.innerHTML = `
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 011-1h4a1 1 0 110 2H8a1 1 0 01-1-1zm1 3a1 1 0 100 2h4a1 1 0 100-2H8z" clip-rule="evenodd"></path>
                    </svg>
                `;
                deleteBtn.title = 'Delete Task';
                deleteBtn.addEventListener('click', () => {
                    listItem.classList.add('task-exit');
                    listItem.addEventListener('animationend', () => deleteTask(task.id), { once: true });
                });

                actionsContainer.appendChild(completeBtn);
                actionsContainer.appendChild(deleteBtn);

                listItem.appendChild(taskText);
                listItem.appendChild(actionsContainer);

                taskList.appendChild(listItem);
            });

            filterButtons.forEach(button => {
                if (button.dataset.filter === currentFilter) {
                    button.classList.add('bg-blue-500', 'text-white', 'shadow-inner', 'scale-105');
                    button.classList.remove('bg-gray-200', 'text-gray-700');
                } else {
                    button.classList.remove('bg-blue-500', 'text-white', 'shadow-inner', 'scale-105');
                    button.classList.add('bg-gray-200', 'text-gray-700');
                }
            });
        }

        function addTask(text) {
            if (text.trim() === '') {
                console.warn('Task cannot be empty!');
                return;
            }

            const newTask = {
                id: Date.now(),
                text: text.trim(),
                completed: false
            };

            tasks.push(newTask);
            saveTasks();
            renderTasks();
            taskInput.value = '';
        }

        function toggleComplete(id) {
            tasks = tasks.map(task =>
                task.id === id ? { ...task, completed: !task.completed } : task
            );
            saveTasks();
            renderTasks();
        }

        function deleteTask(id) {
            tasks = tasks.filter(task => task.id !== id);
            saveTasks();
            renderTasks();
        }

        function setFilter(filter) {
            currentFilter = filter;
            renderTasks();
        }

        function clearCompletedTasks() {
            tasks = tasks.filter(task => !task.completed);
            saveTasks();
            renderTasks();
        }

        addTaskBtn.addEventListener('click', () => addTask(taskInput.value));

        taskInput.addEventListener('keypress', (event) => {
            if (event.key === 'Enter') {
                addTask(taskInput.value);
            }
        });

        filterButtons.forEach(button => {
            button.addEventListener('click', () => setFilter(button.dataset.filter));
        });

        clearCompletedBtn.addEventListener('click', clearCompletedTasks);

        document.addEventListener('DOMContentLoaded', renderTasks);
    </script>
</body>
</html>
